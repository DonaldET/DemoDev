<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." name="Demogenerator Wrapper">
	<description>Template Generation Task</description>

	<echo>Generate Output from Template and Property Model using Freemarker</echo>

	<target name="gen_init" description="Set default properties for caller">
		<property name="p1_default_context" value="${GEN_master}" />
		<property name="p2_target_dir" value="${BUILD.target}" />
		<property name="p4_override_context" value="${GEN_override}" />
	</target>

	<!-- Generator using Freemarker invoked from ANT -->
	<target name="generateFromTemplate" depends="gen_init" description="Use Freemarker template to generate values">
		<echo message="Generate artifacts using templates and model properties" />
		<java jar="${BUILD.generator.path}/${BUILD.generator.jar}" fork="true" failonerror="true" maxmemory="256m">
			<arg value="-defaultContext" />
			<arg value="${p1_default_context}" />
			<arg value="-dstDir" />
			<arg value="${p2_target_dir}" />
			<arg value="-generatedFileList" />
			<arg value="${p3_target_list}" />
			<!-- Matching target file list -->
			<arg value="-overrideContextList" />
			<arg value="${p4_override_context}" />
			<arg value="-srcDir" />
			<arg value="${p5_source_dir}" />
			<arg value="-templateList" />
			<arg value="${p6_template_list}" />
			<!-- Source file list -->
			<classpath>
				<pathelement location="${BUILD.generator.path}/${BUILD.generator.jar}" />
			</classpath>
		</java>
	</target>

</project>
